<!DOCTYPE html>
<html lang="en">
<head>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!--

        ## RECIPES
        - Prep time, cook time
        - Number of servings
        - Ingredients
            - quantities, units of measure, ingredient
            - optionals
            - alternatives/substitutes
        - Instructions
            - quantities account for # of servings desired
        - save recipes, add ingredients to shopping list in multiples of whole recipe and modify quantities, substitute
          or omit items arbitrarily
        - schedule recipes for certain dates for meal planning (e.g. burrito bowls on Tuesday night, salad on Wednesday
          night
            - distinguish between cooking & eating
            - prep & tasting notes for the recipe and for each preparation/serving

    -->

    <link type="text/css" rel="stylesheet" href="Recipes.css" />

    <script type="text/javascript">

        let weekdayNames = ['Sun', 'Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat'];
        const BREAKFAST = 0, BRUNCH = 1, LUNCH = 2, SNACK = 3, DINNER = 4, WORKOUT = 5;

        class Ingredient {
            constructor(name, unit, qty) {
                if(!name || name === '')
                    console.log(`No name provided for new Ingredient instance`);
                if(!unit && unit !== '')
                    console.log(`No unit provided for new Ingredient instance`);
                if(!qty || typeof qty !== 'number')
                    console.log(`No quantity provided for new Ingredient instance`);

                this._name = name || '';
                this._unit = unit || '';
                this._qty = qty || false;
            }

            get name() {
                return this._name;
            }
            get unit() {
                return this._unit;
            }
            get qty() {
                return this._qty;
            }

            set name(name) {
                if(typeof name !== 'string' || name === '')
                    console.log(`No value provided for Ingredient name`);

                this._name = name;
            }
            set unit(unit) {
                if(typeof unit !== 'string' || unit === '')
                    console.log(`No value provided for Ingredient unit`);

                this._unit = unit;
            }
            set qty(qty) {
                if(typeof qty !== 'number')
                    console.log(`No value provided for Ingredient quantity`);

                this._qty = qty;
            }

            toString() {
                return this.name;
            }
        }
        class ElectiveIngredient extends Ingredient {
            constructor(primary) {
                super();

                this.options = [primary];
            }

            get name() {
                return this.options[0].name;
            }
            get unit() {
                return this.options[0].unit;
            }
            get qty() {
                return this.options[0].qty;
            }

            set name(name) {
                if(typeof name !== 'string' || name === '')
                    console.log(`No value provided for Ingredient name`);

                this.options[0].name = name;
            }
            set unit(unit) {
                if(typeof unit !== 'string' || unit === '')
                    console.log(`No value provided for Ingredient unit`);

                this.options[0]._unit = unit;
            }
            set qty(qty) {
                if(typeof qty !== 'number')
                    console.log(`No value provided for Ingredient quantity`);

                this.options[0]._qty = qty;
            }

            addOption(ingd) {
                if(!(ingd instanceof Ingredient))
                    throw new TypeError('ElectiveIngredient options must be Ingredient instances');
                if(ingd instanceof ElectiveIngredient)
                    throw new TypeError('ElectiveIngredient options cannot be other ElectiveIngredient instances');

                this.options.push(ingd);
                return this.length;
            }
        }
        class Recipe {
            constructor(title) {
                if(!title || title === '')
                    throw new TypeError('Argument to `Recipe` constructor must be a non-empty string');

                this.id = false;
                this.title = title;
                this.ingredients = [];
                this.instructions = [];
            }

            addIngredient(ingd) {
                if(!(ingd instanceof Ingredient))
                    throw new TypeError(`Argument to addIngredient() must be an Ingredient instance -- received ${ingd}`);

                if(this.ingredients.indexOf(ingd) >= 0)
                    throw new Error(`Ingredient ${ingd} cannot be added twice to recipe ${this}`);
                else if(this.ingredients.findIndex(a => a.name === ingd.name) >= 0)
                    console.warn(`An ingredient with the name ${ingd} has already been added to recipe ${this}`);

                this.ingredients.push(ingd);
                return this.ingredients.length;
            }
            addInstruction(inst) {
                if(typeof inst !== 'string')
                    throw new TypeError(`Argument to addInstruction() must be an string -- received ${inst}`);

                if(this.instructions.indexOf(inst) >= 0)
                    throw new Error(`Instruction ${inst} cannot be added twice to recipe ${this}`);

                this.instructions.push(inst);
                return this.instructions.length;
            }

            toString() {
                return this.title;
            }
            toJSON() {
                //  `replacer()` is used to substitute certain values with other values to be serialized
                //  Substitutions are entirely arbitrary
                //  Here they are performed to ensure consistency in the data file while minimizing its size
                let replacer = function (value) {
                    if(value === undefined || value === null)
                        return '';

                    if(value === false)
                        return 'false';

                    return value;
                };

                let ingredients = [];
                this.ingredients.forEach(val => ingredients.push(val.toJSON()));

                let instructions = [];
                this.instructions.forEach(val => instructions.push(val.toJSON()));

                let jobj = {
                    title: replacer(this.title),
                    ingredients: ingredients,
                    instructions: instructions
                };

                return jobj;
            }
        }
        class Meal {
            constructor(date, time, recipe) {
                this.date = date;
                this.time = time;
                this.recipe = recipe;
            }
        }
        class ShoppingList {
            constructor() {

            }
        }


        class RecipeIndex {
            constructor() {
                this.container = document.createElement('div');
                this.container.className = 'index';

                this.title = document.createElement('h2');
                this.title.className = 'title';
                this.title.innerHTML = 'Recipe Index';
                this.container.appendChild(this.title);

                this.table = document.createElement('table');
                this.container.appendChild(this.table);

                this.index = [];
                this.sortFun = (a, b) => (a.title > b.title? 1 : -1);
            }

            addEntry(recipe) {
                //  Check if recipe i already added and if so return its index
                let ind = this.index.indexOf(recipe);
                if(ind >= 0) {
                    console.log(`${recipe} has already been added to the index - it will not be added again`);
                    return ind;
                }

                ind = this.index.findIndex(a => a.title === recipe.title);
                if(ind >= 0) {
                    console.info(`Recipe title ${recipe.title} has multiple entries in the index`);
                }

                //  Add recipe to index array
                this.index.push(recipe);

                //  Sort the index and get the position of the new recipe
                this.index.sort(this.sortFun);
                ind = this.index.indexOf(recipe);

                //  Create a new table row at the same position
                let titleRow = this.table.insertRow(ind);

                //  Add the recipe title to a cell in the title row
                titleRow.insertCell(0).innerHTML = recipe.title;
                titleRow.cells[0].className = "recipe";

                //  Return the new recipe's position in the index array
                return ind;
            }

            init() {
                //  Fetch data from storage/server

                //  Populate display
            }
        }

        class MealPlan {
            constructor() {
                this.container = document.createElement('div');
                this.container.className = 'meal-plan';

                this.title = document.createElement('h2');
                this.title.className = 'title';
                this.container.appendChild(this.title);

                this.table = document.createElement('table');
                this.container.appendChild(this.table);

                this.header = this.table.insertRow(0);
                let weekdayNames = ['Sun', 'Mon', 'Tues', 'Wed', 'Thurs', 'Fri', 'Sat'];
                for(let i=0; i<7; i++) {
                    let cell = this.header.insertCell(i);
                    cell.innerHTML = `${weekdayNames[i]} - `;
                    cell.className = 'header';
                }

                this.mealRows = [];
                for(let i=0; i<6; i++) {
                    this.mealRows[i] = this.table.insertRow(this.table.rows.length);
                    this.mealRows[i].className = 'schedule';
                    for (let j=0; j<7; j++)
                        this.mealRows[i].insertCell(j);
                }

                this.week = false;
                this.meals = [];
            }

            getMealPlanFor(week) {
                //  Starting on date indicated, get all meals planned for next 7 days
                let d = new Date(week);

                //  `meals` is an array of 7 arrays -- one for each day of the week
                let meals = [];
                for(let i=0; i<7; i++) {
                    meals.push(this.getMealsOn(d));
                    d.setDate(d.getDate() + 1);
                }

                return meals;
            }
            getMealsOn(day) {
                return this.meals.filter(m => (m.date.getFullYear() === day.getFullYear() && m.date.getMonth() === day.getMonth() && m.date.getDate() === day.getDate()));
            }

            setWeek(week) {
                //  Set a new date `d` to midnight on the Sunday of the week in which the argument `week` falls
                let d = new Date(week.getFullYear(), week.getMonth(), week.getDate() - week.getDay());
                console.info(`Set calendar to display the week beginning ${d.toLocaleDateString()}`);

                //  If the indicated week is already displayed, do nothing
                if(d === this.week) {
                    console.log(`The week of ${d.toLocaleDateString()} is already displayed on the calendar`);
                    return false;
                }

                //  Reset the title to reflect the new week
                this.title.innerHTML = `Meal Plan - Week of ${d.toLocaleDateString()}`;

                //  Retain the calculated value of `d` for reference
                this.week = new Date(d);

                //  Retrieve meal plan for selected week
                let meals = this.getMealPlanFor(d);
                console.info(`There are ${meals.flat().length} meals planned for the week`);

                //  Update data in table
                for(let i=0; i<7; i++) {
                    //  Add the date to the header row
                    this.header.cells[i].innerHTML = `${weekdayNames[i]} ${d.getDate()}`;

                    //  Clear previous recipes from the schedule
                    for(let j=0; j<6; j++)
                        for (let k=0; k<7; k++)
                            this.mealRows[j].cells[k].innerHTML = '';

                    //  Add new recipes to the schedule
                    for(let j=0; j<meals[i].length; j++)
                        this.addRecipe(meals[i][j]);

                    //  Advance `d` by 1 day
                    d.setDate(d.getDate() + 1);
                }
            }
            advanceWeek(count = 1) {
                let d = new Date(this.week.getTime() + count * 7*24*60*60*1000);
                this.setWeek(d);
            }

            addRecipe(recipe, day, meal) {
                let d = new Date(day.getFullYear(), day.getMonth(), day.getDate());
                if(d < this.week || d - 7*24*60*60*1000 >= this.week) {
                    console.log(`${d.toLocaleDateString()} is outside of current calendar date range`);
                    return false;
                }

                console.info(`List ${recipe.title} on ${d.toLocaleDateString()}`);

                let cell = this.mealRows[meal].cells[d.getDay()];
                let event = cell.appendChild(document.createElement('div'));
                event.className = 'meal';
                event.innerHTML = recipe.title;

                return event;
            }

            init(week) {
                //  Fetch data from storage/server


                //  Populate display
                this.setWeek(week);
            }
        }

    </script>

    <script type="text/javascript">

        function main() {
            //  Define a content container
            let container = document.createElement('div');
            container.className = 'content';
            document.body.appendChild(container);

            //  Define the meal plan
            window.calendar = new MealPlan();
            container.appendChild(calendar.container);

            //  Define the recipe index
            window.index = new RecipeIndex();
            container.appendChild(index.container);

            //  Initialize the calendar and index
            window.calendar.init(new Date());
            window.index.init();

            //  Demonstrate data display

            //  Sunday 11/4
            let eggRadishesToast = new Recipe('Egg &amp; Radishes on Crisp Bread');
            let spinachApricotSalad = new Recipe('Spinach Apricot Salad');
            let spicyHoneyRoastedChickpeas = new Recipe('Spicy Honey-Roasted Chickpeas');

            let plans = [{
                date: new Date(2018, 10, 4),
                snack: eggRadishesToast,
                dinner: spinachApricotSalad,
                workout: spicyHoneyRoastedChickpeas
            }];


            //  Monday 11/5
            let appleNutQuark = new Recipe('Apple &amp; Nut Quark');
            let chickpeaGrapefruitSalad = new Recipe('Chickpea Grapefruit Salad');
            let turkeyTomatoSlices = new Recipe('Turkey Breast Tomato Slices');
            let avocadoCeviche = new Recipe('Avocado Ceviche');
            let carrotCucumberShake = new Recipe('Carrot &amp; Cucumber Shake');

            plans.push({
                date: new Date(2018, 10, 5),
                breakfast: eggRadishesToast,
                brunch: appleNutQuark,
                lunch: chickpeaGrapefruitSalad,
                snack: turkeyTomatoSlices,
                dinner: avocadoCeviche,
                workout: carrotCucumberShake
            });


            //  Tuesday 11/6
            let snickersPorridge = new Recipe('Snickers Porridge');
            let oatsBlackberryJam = new Recipe('Oats with Blackberry Jam');
            let cauliflowerCurry = new Recipe('Cauliflower Curry');
            let chaoticSalmon = new Recipe('Chaotic Salmon');
            let chickenSate = new Recipe('Chicken Sat&eacute;');
            let cucumberCottageCheeseSandwiches = new Recipe('Cucumber Cottage Cheese Sandwiches');

            plans.push({
                date: new Date(2018, 10, 6),
                breakfast: snickersPorridge,
                brunch: oatsBlackberryJam,
                lunch: cauliflowerCurry,
                snack: chaoticSalmon,
                dinner: chickenSate,
                workout: cucumberCottageCheeseSandwiches
            });


            //  Wednesday 11/7
            let friedSpinachCottageCheese = new Recipe('Fried Spinach with Cottage Cheese');
            let appleAlmondButterSnack = new Recipe('Sliced Apple &amp; Almond Butter');
            let cauliflowerRiceTofu = new Recipe('Cauliflower Rice wth Tofu');
            let crispMozzarellaSlices = new Recipe('Crisp Mozzarella Slices');
            crispMozzarellaSlices.addIngredient(new Ingredient('crisp (whole-grain) bread', 'slices', 7));
            crispMozzarellaSlices.addIngredient(new Ingredient('low-fat mozzarella', 'oz', 4.33));
            crispMozzarellaSlices.addIngredient(new Ingredient('alfalfa sprouts', 'oz', 1.33));

            let roastedQuinoaButternutSalad = new Recipe('Roasted Quinoa Butternut Salad');

            plans.push({
                date: new Date(2018, 10, 7),
                breakfast: friedSpinachCottageCheese,
                brunch: appleAlmondButterSnack,
                lunch: cauliflowerRiceTofu,
                snack: crispMozzarellaSlices,
                dinner: roastedQuinoaButternutSalad,
                workout: carrotCucumberShake
            });


            //  Thursday 11/8
            let scrambledEggBreadChives = new Recipe('Scrambled Egg on Bread with Chives');
            let beetrootCarpaccio = new Recipe('Beetroot Carpaccio');
            let applePeanutButter = new Recipe('Apple & Peanut Butter');
            let quinoaSaladPrawns = new Recipe('Quinoa Salad with Prawns');
            let bananaQuark = new Recipe('Banana Quark');

            plans.push({
                date: new Date(2018, 10, 8),
                breakfast: scrambledEggBreadChives,
                brunch: oatsBlackberryJam,
                lunch: beetrootCarpaccio,
                snack: applePeanutButter,
                dinner: quinoaSaladPrawns,
                workout: bananaQuark
            });


            //  Friday 11/9
            let chocolateMintLatte = new Recipe('Chocolate Mint Latte');
            let kiwiVanillaOats = new Recipe('Kiwi Vanilla Oats');
            let chickenQuinoaBowlBeetrootHummus = new Recipe('Chicken Quinoa Bowl with Beetroot Hummus');
            let tofuTomatoSlices = new Recipe('Tofu Tomato Slices');
            tofuTomatoSlices.addIngredient(new Ingredient('crisp whole-grain bread', 'slices', 4));
            tofuTomatoSlices.addIngredient(new Ingredient('smoked tofu', 'oz', 3.5));
            tofuTomatoSlices.addIngredient(new Ingredient('tomato', '', 1));
            tofuTomatoSlices.addIngredient(new Ingredient('fresh basil', 'leaves', 8));

            let savryPorridgeSunnyEgg = new Recipe('Savory Porridge with Sunny Egg');
            let mangoLassi = new Recipe('Mango Lassi');

            plans.push({
                date: new Date(2018, 10, 9),
                breakfast: chocolateMintLatte,
                brunch: kiwiVanillaOats,
                lunch: chickenQuinoaBowlBeetrootHummus,
                snack: tofuTomatoSlices,
                dinner: savryPorridgeSunnyEgg,
                workout: mangoLassi
            });


            //  Saturday 11/10
            let onePotChickenKorma = new Recipe('One Pot Chicken Korma');
            let bircherMuesli = new Recipe('Bircher Muesli');
            let friedFishCurriedSpinach = new Recipe('Fried Fish with Curried Spinach');

            plans.push({
                date: new Date(2018, 10, 10),
                breakfast: oatsBlackberryJam,
                brunch: appleNutQuark,
                lunch: onePotChickenKorma,
                snack: bircherMuesli,
                dinner: friedFishCurriedSpinach,
                workout: null
            });


            //  Sunday 11/11
            let cinnamonBananaShake = new Recipe('Cinnamon Banana Shake');
            cinnamonBananaShake.addIngredient(new Ingredient('almond milk', 'cup', 1));
            cinnamonBananaShake.addIngredient(new Ingredient('soy yogurt', 'oz', 10.5));
            cinnamonBananaShake.addIngredient(new Ingredient('banana', '', 0.5));
            cinnamonBananaShake.addIngredient(new Ingredient('natural almond butter', 'tbsp', 1));
            cinnamonBananaShake.addIngredient(new Ingredient('cinnamon powder', 'tsp', 0.5));

            let quickZucchiniParmesanHash = new Recipe('Quick Zucchini &amp; Parmesan Hash');

            let whiteBeanSoupSmokedTofu = new Recipe('White Bean Soup with Smoked Tofu');
            whiteBeanSoupSmokedTofu.addIngredient(new Ingredient('white beans (canned)', 'oz', 3.5));
            whiteBeanSoupSmokedTofu.addIngredient(new Ingredient('whole-grain pasta', 'oz', 1.75));
            whiteBeanSoupSmokedTofu.addIngredient(new Ingredient('organic vegetable stock', 'cups', 1.67));
            whiteBeanSoupSmokedTofu.addIngredient(new Ingredient('diced tomato', '', 1));
            whiteBeanSoupSmokedTofu.addIngredient(new Ingredient('diced red onion', '', 0.5));
            whiteBeanSoupSmokedTofu.addIngredient(new Ingredient('smoked tofu', 'oz', 1.75));
            whiteBeanSoupSmokedTofu.addIngredient(new Ingredient('mixed Italian herbs', 'tsp', 0.5));
            whiteBeanSoupSmokedTofu.addIngredient(new Ingredient('virgin olive oil', 'tsp', 2));

            plans.push({
                date: new Date(2018, 10, 11),
                breakfast: snickersPorridge,
                brunch: cinnamonBananaShake,
                lunch: chaoticSalmon,
                snack: quickZucchiniParmesanHash,
                dinner: whiteBeanSoupSmokedTofu,
                workout: null
            });


            //  Monday 11/12
            let mustardDeviledEggs = new Recipe('Mustard Deviled Eggs');
            mustardDeviledEggs.addIngredient(new Ingredient('hard-boiled eggs', '', 4));
            mustardDeviledEggs.addIngredient(new Ingredient('Dijon mustard', 'tsp', 2));
            mustardDeviledEggs.addIngredient(new Ingredient('cottage cheese', 'oz', 3.5));
            mustardDeviledEggs.addIngredient(new Ingredient('chopped dill', 'tbsp', 2));

            let pineappleMangoSmoothie = new Recipe('Pineapple Mango Smoothie');
            pineappleMangoSmoothie.addIngredient(new Ingredient('mango', '', 0.5));
            pineappleMangoSmoothie.addIngredient(new Ingredient('fresh pineapple', 'oz', 3.5));
            pineappleMangoSmoothie.addIngredient(new Ingredient('coconut water', 'cups', 0.67));
            pineappleMangoSmoothie.addIngredient(new Ingredient('low-fat coconut milk', 'cups', 0.2));
            pineappleMangoSmoothie.addIngredient(new Ingredient('natural cashew butter', 'tbsp', 1));

            let mintyWatermelonFetaSalad = new Recipe('Minty Watermelon Feta Salad');
            mintyWatermelonFetaSalad.addIngredient(new Ingredient('seedless watermelon', 'oz', 15.75));
            mintyWatermelonFetaSalad.addIngredient(new Ingredient('low-fat feta cheese', 'oz', 5.25));
            mintyWatermelonFetaSalad.addIngredient(new Ingredient('fresh mint', 'bunches', 0.5));
            mintyWatermelonFetaSalad.addIngredient(new Ingredient('roasted pine nuts', 'oz', 1));
            mintyWatermelonFetaSalad.addIngredient(new Ingredient('lime', '', 1));
            mintyWatermelonFetaSalad.addIngredient(new Ingredient('virgin olive oil', 'tsp', 1.5));

            let sweetSpicyWildRice = new Recipe('Sweet & Spicy Wild Rice');
            sweetSpicyWildRice.addIngredient(new Ingredient('wile rice', 'oz', 1.75));
            sweetSpicyWildRice.addIngredient(new Ingredient('mango', '', 0.5));
            sweetSpicyWildRice.addIngredient(new Ingredient('cooked beetroot', 'oz', 1.75));
            sweetSpicyWildRice.addIngredient(new Ingredient('cashews', 'oz', 1));
            sweetSpicyWildRice.addIngredient(new Ingredient('lime', '', 0.5));
            sweetSpicyWildRice.addIngredient(new Ingredient('sliced chili peppers', '', 0.5));
            sweetSpicyWildRice.addIngredient(new Ingredient('fresh cilantro', 'bunches', 0.25));
            sweetSpicyWildRice.addIngredient(new Ingredient('fresh mint', 'bunches', 0.25));
            sweetSpicyWildRice.addIngredient(new Ingredient('low-sodium soy sauce', 'tbsp', 1));
            sweetSpicyWildRice.addIngredient(new Ingredient('cayenne pepper', 'pinch', 1));

            let mintyQuarkShake = new Recipe('Minty Quark Shake');
            mintyQuarkShake.addIngredient(new Ingredient('low-fat quark', 'oz', 14));
            mintyQuarkShake.addIngredient(new Ingredient('cucumber', '', 1));
            mintyQuarkShake.addIngredient(new Ingredient('fresh mint', 'bunches', 1));
            mintyQuarkShake.addIngredient(new Ingredient('low-fat milk', 'cups', 0.75));
            mintyQuarkShake.addIngredient(new Ingredient('water', 'cups', 1.25));
            console.log(mintyQuarkShake.ingredients.length);

            plans.push({
                date: new Date(2018, 10, 12),
                breakfast: mustardDeviledEggs,
                brunch: pineappleMangoSmoothie,
                lunch: mintyWatermelonFetaSalad,
                snack: crispMozzarellaSlices,
                dinner: sweetSpicyWildRice,
                workout: mintyQuarkShake
            });


            //  Tuesday 11/13
            let berryApricotMuesli = new Recipe('Berry Apricot Muesli');

            plans.push({
                date: new Date(2018, 10, 13),
                breakfast: cinnamonBananaShake,
                brunch: tofuTomatoSlices,
                lunch: sweetSpicyWildRice,
                snack: berryApricotMuesli,
                dinner: chickenQuinoaBowlBeetrootHummus,
                workout: bananaQuark
            });


            //  Wednesday 11/14
            let peanutButterOvernightOats = new Recipe('Peanut Butter Overnight Oats');
            let blueberryBomb = new Recipe('Blueberry Bomb');

            plans.push({
                date: new Date(2018, 10, 14),
                breakfast: peanutButterOvernightOats,
                brunch: kiwiVanillaOats,
                lunch: whiteBeanSoupSmokedTofu,
                snack: eggRadishesToast,
                dinner: spinachApricotSalad,
                workout: blueberryBomb
            });


            //  Thursday 11/15
            let crayfishAvocadoBread = new Recipe('Crayfish Avocado Bread');
            let greenVegetablesFetaCheese = new Recipe('Green Vegetables with Feta Cheese');
            let greekFetaWrap = new Recipe('Greek Feta Wrap');
            let lemonHerbChicken = new Recipe('Lemon Herb Chicken');

            plans.push({
                date: new Date(2018, 10, 15),
                breakfast: crayfishAvocadoBread,
                brunch: greenVegetablesFetaCheese,
                lunch: chickpeaGrapefruitSalad,
                snack: greekFetaWrap,
                dinner: lemonHerbChicken,
                workout: carrotCucumberShake
            });


            //  Friday 11/16
            let chiliCarne = new Recipe('Chili con Carne');
            let honeyQuark = new Recipe('Honey Quark');
            let ovenBakedPotatoesShrimp = new Recipe('Oven Baked Potatoes with Shrimp');

            plans.push({
                date: new Date(2018, 10, 16),
                breakfast: bircherMuesli,
                brunch: cinnamonBananaShake,
                lunch: chiliCarne,
                snack: honeyQuark,
                dinner: tofuTomatoSlices,
                workout: ovenBakedPotatoesShrimp
            });


            //  Saturday 11/17
            let oatmealEnergyShake = new Recipe('Oatmeal Energy Shake');
            let riceCrackerEggApple = new Recipe('Rice Cracker with Egg and Apple');
            let sweetSpicyCarrotSalad = new Recipe('Sweet and Spicy Carrot Salad');

            plans.push({
                date: new Date(2018, 10, 17),
                breakfast: honeyQuark,
                brunch: oatmealEnergyShake,
                lunch: riceCrackerEggApple,
                snack: oatsBlackberryJam,
                dinner: sweetSpicyCarrotSalad,
            });


            //  Sunday 11/18
            let vanillaChiaPudding = new Recipe('Vanilla Chia Pudding');
            let healthierQuesadilla = new Recipe('Healthier Quesadilla');

            plans.push({
                date: new Date(2018, 10, 18),
                breakfast: vanillaChiaPudding,
                brunch: savryPorridgeSunnyEgg,
                lunch: beetrootCarpaccio,
                snack: berryApricotMuesli,
                dinner: healthierQuesadilla
            });


            let shoppingList = [];
            let week = {
                start: new Date(2018, 10, 11),
                end: new Date(2018, 10, 18)
            };
            for(let i=0; i<plans.length; i++) {
                let d = plans[i].date;
                if(plans[i].breakfast) {
                    index.addEntry(plans[i].breakfast);
                    calendar.addRecipe(plans[i].breakfast, d, BREAKFAST);
                    console.log(plans[i].breakfast.ingredients.length);

                    if(d >= week.start && d < week.end)
                        shoppingList = shoppingList.concat(plans[i].breakfast.ingredients);

                }
                if(plans[i].brunch) {
                    index.addEntry(plans[i].brunch);

                    calendar.addRecipe(plans[i].brunch, d, BRUNCH);

                    if(d >= week.start && d < week.end)
                        shoppingList = shoppingList.concat(plans[i].brunch.ingredients);
                }
                if(plans[i].lunch) {
                    index.addEntry(plans[i].lunch);

                    calendar.addRecipe(plans[i].lunch, d, LUNCH);

                    if(d >= week.start && d < week.end)
                        shoppingList = shoppingList.concat(plans[i].lunch.ingredients);
                }
                if(plans[i].snack) {
                    index.addEntry(plans[i].snack);

                    calendar.addRecipe(plans[i].snack, d, SNACK);

                    if(d >= week.start && d < week.end)
                        shoppingList = shoppingList.concat(plans[i].snack.ingredients);
                }
                if(plans[i].dinner) {
                    index.addEntry(plans[i].dinner);

                    calendar.addRecipe(plans[i].dinner, d, DINNER);

                    if(d >= week.start && d < week.end)
                        shoppingList = shoppingList.concat(plans[i].dinner.ingredients);
                }
                if(plans[i].workout) {
                    index.addEntry(plans[i].workout);

                    calendar.addRecipe(plans[i].workout, d, WORKOUT);

                    if(d >= week.start && d < week.end)
                        shoppingList = shoppingList.concat(plans[i].workout.ingredients);
                }
            }
            let i=0, j=0;
            while(i<shoppingList.length) {
                j=i+1;
                while(j<shoppingList.length) {
                    if(shoppingList[i].name === shoppingList[j].name && shoppingList[i].unit === shoppingList[j].unit) {
                        shoppingList[i].qty += shoppingList[j].qty;
                        shoppingList.splice(j, 1);
                    }
                    j++;
                }
                i++;
            }
            shoppingList.sort((a,b) => {if(a.name === b.name){return a.unit > b.unit} return a.name.toLowerCase() > b.name.toLowerCase()});
            console.log(shoppingList);
        }

    </script>


    <meta charset="UTF-8">
    <title>Recipes</title>
</head>
<body onload="main()">

</body>
</html>